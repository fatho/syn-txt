(define (arpeggio/maj base length)
    (define unit (/ length 3))
    (list
        (note :start (* 0 unit) :length unit :pitch base)
        (note :start (* 1 unit) :length unit :pitch (transpose base 3))
        (note :start (* 2 unit) :length unit :pitch (transpose base 5))
    ))

(define melody
    (sequence-all
        (list
            (arpeggio/maj "c2" 1/4)
            (arpeggio/maj "d2" 1/4)
            (arpeggio/maj "e2" 1/4)
            (arpeggio/maj "c2" 1/4)
        )))

(define instrument 
    (synth  
        :name "test"
        :params
        (dict
            :gain 0.9
            :unison 3
            :unison-detune  3
            :wave-shape "saw"
            :envelope (envelope :attack 0.01 :decay 1.0 :sustain 0.0 :release 0.2)
            :filter (biquad/lowpass :cutoff 800.0)
        )
    ))

(song :bpm 90 :notes melody :instrument instrument)