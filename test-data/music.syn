(define part1
    (begin
        ; Define a function that plays a "de-du", first playing the given note,
        ; always immediately followed by an "e3"
        (define (dedu note-name)
            (piano-roll
                (note :pitch note-name :length 1/16)
                (note :pitch "e3" :length 1/16 :velocity 0.3)
            )
        )

        ; Define a simple melody for the left hand based on two notes
        (define (left-basic n1 n2)
            (piano-roll
                (note :pitch n1 :length 3/4 :velocity 0.3)
                (note :pitch n2 :length 1/4 :velocity 0.3 :offset 0)
                (note :pitch n2 :length 1/4 :velocity 0.3 :offset 1/4)
                (note :pitch n2 :length 1/4 :velocity 0.3 :offset 1/4)
            )
        )

        ; The note pitch is denoted using the standard 12-tone chromatic scale
        ; Capitalization does not matter, sharps are denoted as `#` or `♯` (e.g `a♯5`),
        ; flats are denoted as `b` or `♭` (e.g. `eb3`).
        (define part1-1
            (piano-roll
                (dedu "A3")
                (dedu "B3")
                (dedu "C4")
                (dedu "B3")
                (dedu "A3")
                (dedu "C4")            
            )
        )

        (define part1-2
            (piano-roll
                (dedu "B3")
                (dedu "A3")
                (dedu "G3")
                (dedu "A3")
                (dedu "B3")
                (dedu "E4")
            )
        )

        (piano-roll
            ; Piano rolls can be made from other piano rolls
            (piano-roll/stack
                part1-1
                (left-basic "a2" "a3")
            )
            ; and even the same one multiple times
            (piano-roll/stack
                part1-2
                (left-basic "b2" "b3")
            )
            (piano-roll/stack
                part1-2
                (left-basic "b2" "b3")
            )
        )
    )
)

; The final expression in a file must evaluate to a song value
(song :bpm 90 :notes part1)